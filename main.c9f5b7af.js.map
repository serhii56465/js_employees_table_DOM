{"version":3,"sources":["scripts/main.js"],"names":["sortTable","thTarget","trList","table","rows","switching","i","x","y","shouldSwitch","dir","index","closest","querySelectorAll","map","item","innerText","indexOf","switchcount","document","querySelector","length","getElementsByTagName","xf","parseFloat","innerHTML","slice","replace","yf","toLowerCase","parentNode","insertBefore","selectRow","target","rowsBody","numberRows","classList","remove","add","insertAdjacentHTML","form","body","addEventListener","e","targetItem","matches","preventDefault","data","FormData","dataObject","Object","fromEntries","entries","Number","age","alert","name","newRow","insertRow","insertCell","position","office","salaryCell","rightSalary","salary","toFixed","toString","reset","currentText","cellIndex","blurCell","focus","targetItemBlur","cellTd","value","floatToString","code"],"mappings":"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","file":"main.c9f5b7af.js","sourceRoot":"..\\src","sourcesContent":["'use strict';\n\nfunction sortTable(thTarget) {\n    const trList = thTarget.closest('tr');\n    const items = trList.querySelectorAll('th');\n    const thList = [...items].map(item => item.innerText);\n    const index = thList.indexOf(thTarget.innerText);\n    let table, rows, switching, i, x, y, shouldSwitch, dir, switchcount = 0;\n\n    table = document.querySelector(\"table\");\n    switching = true;\n    dir = \"asc\";\n\n    while (switching) {\n      switching = false;\n      rows = table.rows;\n\n      for (i = 1; i < (rows.length - 2); i++) {\n        shouldSwitch = false;\n        x = rows[i].getElementsByTagName(\"TD\")[index];\n        y = rows[i + 1].getElementsByTagName(\"TD\")[index];\n\n        if (index === 4) {\n            const xf = parseFloat(x.innerHTML.slice(1).replace(\",\", \".\"));\n            const yf = parseFloat(y.innerHTML.slice(1).replace(\",\", \".\"));\n\n            if (dir == \"asc\") {\n                if (xf > yf) {\n                  shouldSwitch = true;\n                  break;\n                }\n              } else if (dir == \"desc\") {\n                if (xf < yf) {\n                  shouldSwitch = true;\n                  break;\n                }\n              }\n        } else {\n            if (dir == \"asc\") {\n                if (x.innerHTML.toLowerCase() > y.innerHTML.toLowerCase()) {\n                  shouldSwitch = true;\n                  break;\n                }\n              } else if (dir == \"desc\") {\n                if (x.innerHTML.toLowerCase() < y.innerHTML.toLowerCase()) {\n                  shouldSwitch = true;\n                  break;\n                }\n              }\n        }\n      }\n\n      if (shouldSwitch) {\n        rows[i].parentNode.insertBefore(rows[i + 1], rows[i]);\n        switching = true;\n        switchcount ++;\n      } else {\n        if (switchcount == 0 && dir == \"asc\") {\n          dir = \"desc\";\n          switching = true;\n        }\n      }\n    }\n  }\n\nfunction selectRow(target) {\n    const rowsBody = document.querySelector('tbody');\n    const numberRows = rowsBody.rows.length;\n\n    for ( let i = 0; i < numberRows; i++ ) {\n        rowsBody.rows[i].classList.remove('active');\n    }\n\n    const resultRow = target.closest('tr');\n    resultRow.classList.add('active');\n}\n\nconst table = document.querySelector('table');\ntable.insertAdjacentHTML('afterend',\n`\n    <form class='new-employee-form'>\n        <label>Name: <input data-qa=\"name\" name=\"name\" type=\"text\" required></label>\n        <label>Position: <input data-qa=\"position\" name=\"position\" type=\"text\" required></label>\n        <label>Office: \n            <select data-qa=\"office\" name=\"office\" required>\n                <option>Tokyo</option>\n                <option>London</option>\n                <option>New York</option>\n                <option>Edinburgh</option>\n                <option>San Francisco</option>\n            </select>\n        </label>\n        <label>Age: <input data-qa=\"age\" name=\"age\" type=\"number\" required></label>\n        <label>Salary: <input data-qa=\"salary\" name=\"salary\" type=\"number\" step=\".001\" required></label>\n        <button type=\"submit\">Save to table</button>\n    </form>\n\n`\n)\n\nconst form = document.querySelector('form')\n\ndocument.body.addEventListener('click', e => {\n    const targetItem = e.target;\n\n    if (targetItem.matches('th')) {\n        sortTable(targetItem);\n    }\n\n    if (targetItem.matches('td')) {\n        selectRow(targetItem);\n    }\n})\n\nform.addEventListener('submit', e => {\n    e.preventDefault();\n\n    const data = new FormData(form);\n    const dataObject = Object.fromEntries(data.entries());\n    const rowsBody = document.querySelector('tbody');\n\n    if ( Number(dataObject.age) < 18 || Number(dataObject.age) > 90 ) {\n        alert(\"Age has to be between 18 and 90\");\n        return;\n    }\n\n    if ( dataObject.name.length < 4 ) {\n        alert(\"Name has to contain more then 3 letters\");\n        return;\n    }\n\n    const newRow = rowsBody.insertRow();\n\n    const nameCell = newRow.insertCell();\n    nameCell.innerText = dataObject.name;\n\n    const positionCell = newRow.insertCell();\n    positionCell.innerText = dataObject.position;\n\n    const officeCell = newRow.insertCell();\n    officeCell.innerText = dataObject.office;\n    \n    const ageCell = newRow.insertCell();\n    ageCell.innerText = dataObject.age;\n\n    const salaryCell = newRow.insertCell();\n    const toFixed = parseFloat(dataObject.salary).toFixed(3);\n    const floatToString = toFixed.toString();\n    const rightSalary = '$' + floatToString.replace('.', ',');\n    salaryCell.innerText = rightSalary;\n\n    form.reset();\n\n    alert(\"You've added new employee. You are simply the best!\");\n})\n\nlet currentText = '';\n\ndocument.body.addEventListener('dblclick', e => {\n    const targetItem = e.target;\n\n    if (targetItem.matches('td')) {\n        currentText = targetItem.innerText;\n\n        if ( targetItem.cellIndex === 3 ) {\n            targetItem.innerHTML = \n            `\n            <input type=\"number\" name=\"cell-input\" class=\"cell-input\">\n            `\n        } else if ( targetItem.cellIndex === 4 ) {\n            targetItem.innerHTML = \n            `\n            <input type=\"number\" name=\"cell-input\" class=\"cell-input\" step=\".001\">\n            `\n        } else {\n            targetItem.innerHTML = \n            `\n            <input type=\"text\" name=\"cell-input\" class=\"cell-input\">\n            `\n        }\n\n        const blurCell = document.querySelector('.cell-input');\n        blurCell.focus();\n\n        blurCell.addEventListener('blur', e => {\n                const targetItemBlur = e.target;\n                const cellTd = targetItemBlur.closest('td')\n\n                if ( blurCell.value.length === 0 ) {\n                    cellTd.innerText = currentText;\n                } else {\n                    if ( cellTd.cellIndex === 4 ) {\n                        const toFixed = parseFloat(blurCell.value).toFixed(3);\n                        const floatToString = toFixed.toString();\n                        cellTd.innerText = '$' + floatToString.replace('.', ',');\n                    } else {\n                        cellTd.innerText = blurCell.value;\n                    }\n                }\n        })\n\n        blurCell.addEventListener('keydown', e => {\n            if ( e.code === 'Enter' ) {\n                const targetItemBlur = e.target;\n                const cellTd = targetItemBlur.closest('td')\n\n                if ( blurCell.value.length === 0 ) {\n                    cellTd.innerText = currentText;\n                } else {\n                    if ( cellTd.cellIndex === 4 ) {\n                        const toFixed = parseFloat(blurCell.value).toFixed(3);\n                        const floatToString = toFixed.toString();\n                        cellTd.innerText = '$' + floatToString.replace('.', ',');\n                    } else {\n                        cellTd.innerText = blurCell.value;\n                    }\n                }\n            }\n        })\n\n\n    }\n})\n"]}